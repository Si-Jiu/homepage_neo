let playList, playingNow, playingIndex = 0, musicStop = 0; const loadPlayer = async (t, e, n) => { const a = `https://api.i-meto.com/meting/api?server=${t}&type=${e}&id=${n}&r=${Math.random()}`; (await fetch(a)).json().then((t => { playList = t, playingIndex = 0, playMusic() })) }; function playMusic() { const t = playList[playingIndex], e = document.getElementById("musicProgress"); try { playingNow.pause() } catch (t) { } playingNow = null, playingNow = new Audio(t?.url), playingNow.addEventListener("pause", (() => { document.getElementById("pauseButton").setAttribute("class", "fa-solid fa-play") })), playingNow.addEventListener("play", (() => { document.getElementById("pauseButton").setAttribute("class", "fa-solid fa-pause") })), playingNow.play(), document.getElementById("cover").setAttribute("src", t?.pic), document.getElementById("musicTitle").textContent = t?.title, document.getElementById("musicAuthor").textContent = t?.author, playingNow.addEventListener("loadedmetadata", (() => { e.setAttribute("max", playingNow.duration), playingNow.addEventListener("timeupdate", (() => { e.setAttribute("value", playingNow.currentTime) })) })), playingNow.addEventListener("ended", (() => { nextMusic() })) } function preMusic() { playingNow.pause(), playingIndex--, playingIndex < 0 && (playingIndex = playList.length - 1), playMusic() } function stopStartMusic() { musicStop = !musicStop, musicStop ? playingNow.pause() : playingNow.play() } function nextMusic() { playingNow.pause(), playingIndex++, playingIndex >= playList.length && (playingIndex = 0), playMusic() } loadPlayer("netease", "playlist", 14175652304);
