let playList, playingNow, playingIndex = 0, musicStop = 0; const loadPlayer = async () => { const t = `https://api.i-meto.com/meting/api?server=netease&type=playlist&id=14175652304&r=${Math.random()}`; (await fetch(t)).json().then((t => { playList = t, playingIndex = 0, playMusic() })) }; function playMusic() { const t = playList[playingIndex]; playingNow = new Audio(t?.url), playingNow.play(), document.getElementById("cover").setAttribute("src", t?.pic), document.getElementById("musicTitle").textContent = t?.title, document.getElementById("musicAuthor").textContent = t?.author } function preMusic() { playingNow.pause(), playingIndex--, playingIndex < 0 && (playingIndex = playList.length - 1), playMusic() } function stopStartMusic() { musicStop = !musicStop, musicStop ? (playingNow.pause(), document.getElementById("pauseButton").setAttribute("class", "fa-solid fa-play")) : (playingNow.play(), document.getElementById("pauseButton").setAttribute("class", "fa-solid fa-pause")) } function nextMusic() { playingNow.pause(), playingIndex++, playingIndex >= playList.length && (playingIndex = 0), playMusic() } loadPlayer();
